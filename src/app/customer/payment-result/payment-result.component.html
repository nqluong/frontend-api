<section class="page-title" style="background-image: url(assets/customer/images/background/page-title-bg.png);">
  <div class="auto-container">
    <div class="title-outer text-center">
      <h1 class="title">Kết Quả Thanh Toán</h1>
      <ul class="page-breadcrumb">
        <li><a routerLink="/customer">Trang Chủ</a></li>
        <li>Thanh Toán</li>
      </ul>
    </div>
  </div>
</section>

<section class="result-section pt-60 pb-90">
  <div class="auto-container">
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center">
        <div class="result-box" *ngIf="isProcessing">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Đang xử lý...</span>
          </div>
          <h3 class="mt-4">Đang xử lý thanh toán</h3>
          <p>Vui lòng đợi trong khi chúng tôi xác nhận thanh toán của bạn...</p>
        </div>
        
        <div class="result-box success-box" *ngIf="!isProcessing && isSuccess">
          <div class="icon-box">
            <i class="fa fa-check-circle"></i>
          </div>
          <h3>Thanh Toán Thành Công</h3>
          <p>Cảm ơn bạn đã đặt phòng tại khách sạn của chúng tôi.</p>
          <div class="server-notification mt-2">
            <small class="text-success">Thông tin của bạn đã được lưu, đặt phòng của bạn đã được xác nhận.</small>
          </div>
          <div class="account-notification mt-2" *ngIf="accountCreated">
            <small class="text-info">
              <i class="fa fa-check-circle"></i> Tài khoản của bạn đã được tạo thành công. Bạn có thể sử dụng thông tin đăng nhập của mình để truy cập vào hệ thống từ lần sau.
            </small>
          </div>
          
          <!-- Section with all booking details -->
          <div class="booking-details mt-4">
            <h4 class="details-heading">THÔNG TIN CHECK-IN</h4>
            <p class="details-note">Vui lòng lưu giữ thông tin này để xuất trình khi nhận phòng</p>
            
            <div class="details-section">
              <h5>Thông Tin Đặt Phòng</h5>
              <div class="booking-info">
                <div class="info-item">
                  <strong>Mã đặt phòng:</strong> {{bookingId}}
                </div>
                <div class="info-item" *ngIf="bookingDate">
                  <strong>Ngày đặt phòng:</strong> {{bookingDate}}
                </div>
                <div class="info-item" *ngIf="paymentId">
                  <strong>Mã thanh toán:</strong> {{paymentId}}
                </div>
                <div class="info-item" *ngIf="transactionNo">
                  <strong>Mã giao dịch:</strong> {{transactionNo}}
                </div>
              </div>
            </div>
            
            <div class="details-section">
              <h5>Thông Tin Phòng</h5>
              <div class="booking-info">
                <div class="info-item" *ngIf="roomName">
                  <strong>Phòng:</strong> {{roomName}}
                </div>
                
                <div class="info-item" *ngIf="checkInDate">
                  <strong>Ngày nhận phòng:</strong> {{checkInDate}}
                </div>
                <div class="info-item" *ngIf="checkOutDate">
                  <strong>Ngày trả phòng:</strong> {{checkOutDate}}
                </div>
                <div class="info-item" *ngIf="stayDuration">
                  <strong>Số ngày ở:</strong> {{stayDuration}} ngày
                </div>
              </div>
            </div>
            
            <div class="details-section">
              <h5>Thông Tin Khách Hàng</h5>
              <div class="booking-info">
                <div class="info-item" *ngIf="customerName">
                  <strong>Họ tên:</strong> {{customerName}}
                </div>
                <div class="info-item" *ngIf="customerEmail">
                  <strong>Email:</strong> {{customerEmail}}
                </div>
                <div class="info-item" *ngIf="customerPhone">
                  <strong>Số điện thoại:</strong> {{customerPhone}}
                </div>
              </div>
            </div>
            
            <div class="details-section">
              <h5>Chi Tiết Thanh Toán</h5>
              <div class="booking-info">
                <div class="info-item" *ngIf="roomRate">
                  <strong>Giá phòng:</strong> {{formatCurrency(roomRate)}}/đêm
                </div>
                <div class="info-item" *ngIf="roomAmount">
                  <strong>Thành tiền phòng:</strong> {{formatCurrency(roomAmount)}}
                </div>
                
                <!-- Service list -->
                <div class="services-list" *ngIf="serviceList && serviceList.length > 0">
                  <div class="service-header">
                    <strong>Dịch vụ đã chọn:</strong>
                  </div>
                  <div class="service-item" *ngFor="let service of serviceList">
                    <div class="service-name">{{service.tenDv}}</div>
                    <div class="service-details">
                      {{formatCurrency(service.gia)}} x {{service.soLuong}} = {{formatCurrency(service.thanhTien)}}
                    </div>
                  </div>
                  <div class="service-total" *ngIf="serviceAmount">
                    <strong>Tổng tiền dịch vụ:</strong> {{formatCurrency(serviceAmount)}}
                  </div>
                </div>
                
                <div class="info-item total-amount">
                  <strong>Tổng số tiền đã thanh toán:</strong> {{formatCurrency(amount)}}
                </div>
              </div>
            </div>
            
          
          </div>
          
          <a routerLink="/customer" class="theme-btn btn-style-one mt-4">
            <span class="btn-title">Quay lại trang chủ</span>
          </a>
        </div>
        
        <div class="result-box error-box" *ngIf="!isProcessing && !isSuccess">
          <div class="icon-box">
            <i class="fa fa-times-circle"></i>
          </div>
          <h3>Thanh Toán Thất Bại</h3>
          <p>{{errorMessage || 'Đã xảy ra lỗi trong quá trình thanh toán. Vui lòng thử lại sau.'}}</p>
          <a routerLink="/customer/checkout" class="theme-btn btn-style-one mt-4">
            <span class="btn-title">Thử lại</span>
          </a>
          <a routerLink="/customer" class="theme-btn btn-style-two mt-4 ms-3">
            <span class="btn-title">Quay lại trang chủ</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</section> 